# Application Configuration - PRODUCTION READY
# DO NOT commit actual secrets to version control
# Automatically import .env file if present
spring.config.import=optional:file:.env[.properties]

spring.application.name=api
server.port=${SERVER_PORT:8081}
spring.main.banner-mode=off

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# SECURITY: All sensitive values use environment variables
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
server.error.include-message=always
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:none}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ============================================
# HikariCP Connection Pool Configuration
# Optimized for production performance
# ============================================
spring.datasource.hikari.connectionTimeout=60000
spring.datasource.hikari.validationTimeout=20000
spring.datasource.hikari.maximumPoolSize=${HIKARI_MAX_POOL:10}
spring.datasource.hikari.minimumIdle=${HIKARI_MIN_IDLE:2}
spring.datasource.hikari.initializationFailTimeout=60000

# ============================================
# Flyway Database Migration Configuration
# ============================================
spring.flyway.baseline-on-migrate=true
spring.flyway.out-of-order=true
spring.flyway.baseline-version=1
spring.flyway.validate-on-migrate=true

# ============================================
# JWT Configuration
# SECURITY: Secret MUST be externalized
# ============================================
jwt.secret=${JWT_SECRET}
jwt.access-token-expiration=${JWT_ACCESS_EXPIRATION:3600000}
jwt.refresh-token-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# ============================================
# File Upload Configuration
# ============================================
file.upload-dir=${FILE_UPLOAD_DIR:uploads}
file.max-file-size=${FILE_MAX_SIZE:10485760}
file.max-request-size=${FILE_MAX_REQUEST:20971520}

# Storage base path for file downloads
storageBasePath=${STORAGE_BASE_PATH:N:\Projects\wd projects git\storage}

# ============================================
# Task Alert System Configuration
# ============================================
task.alerts.enabled=${TASK_ALERTS_ENABLED:true}
task.alerts.cron=${TASK_ALERTS_CRON:0 0 9 * * *}
task.alerts.timezone=${TASK_ALERTS_TIMEZONE:Asia/Kolkata}

# ============================================
# Email Configuration
# SECURITY: All email credentials externalized
# ============================================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=${MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_STARTTLS:true}

# ============================================
# Company Information Configuration
# Used in PDF templates (quotations, challans, etc.)
# ============================================
company.name=${COMPANY_NAME:Walldot Builders LLP}
company.address=${COMPANY_ADDRESS:123 Construction Avenue, Building City, State - 123456}
company.phone=${COMPANY_PHONE:+91 1234567890}
company.email=${COMPANY_EMAIL:info@walldotbuilders.com}
company.website=${COMPANY_WEBSITE:www.walldotbuilders.com}
company.gst=${COMPANY_GST:GST123456789}
company.pan=${COMPANY_PAN:}